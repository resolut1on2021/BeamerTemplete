% Copyright 2007 by Till Tantau
% Copyright 2015 by Vedran Mileti\'c, Joseph Wright
% Copyright 2019-2024 by Joseph Wright, samcarter
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file LICENSE.md for more details.

\mode<presentation>


% \setbeamercolor{section in head/foot}{parent=palette quaternary}
% \setbeamercolor{subsection in head/foot}{parent=palette primary}

% \setbeamercolor{author in head/foot}{parent=section in head/foot}
% \setbeamercolor{title in head/foot}{parent=subsection in head/foot}



\usesectionheadtemplate
  {\hfill\insertsectionhead}
  {\hfill\color{fg!50!bg}\insertsectionhead}

\defbeamertemplate*{footline}{USTC theme}
{%
  \leavevmode%
  \hbox{
    \usebeamerfont{section in head/foot}%
  \begin{beamercolorbox}[wd=.333333\paperwidth,ht=2.25ex,dp=1.125ex, center]{section in head/foot}%
    % \insertsectionnavigationhorizontal{.333333\paperwidth}{\hskip0pt plus1filll}{}%
    \insertshortauthor
  \end{beamercolorbox}%
  % \begin{beamercolorbox}[wd=.3\paperwidth,ht=2.5ex,dp=1.125ex]{subsection in head/foot}%
  %   \usebeamerfont{subsection in head/foot}%
  %   \insertsubsectionnavigationhorizontal{.3\paperwidth}{}{\hskip0pt plus1filll}%
  % \end{beamercolorbox}}%

  \begin{beamercolorbox}[wd=.333333\paperwidth,ht=2.25ex,dp=1.125ex,leftskip=.3cm plus1fill,rightskip=.3cm]{author in head/foot}%
    % \usebeamerfont{author in head/foot}\insertshortauthor
    \usebeamerfont{title in head/foot}\insertshorttitle\nobreak\hfill\usebeamercolor[fg]{page number in head/foot}\usebeamerfont{page number in head/foot}
  \end{beamercolorbox}%

  \begin{beamercolorbox}[wd=.333333\paperwidth,ht=2.25ex,dp=1.125ex, right]{title in head/foot}%
    % \usebeamerfont{title in head/foot}\insertshorttitle\nobreak\hfill\usebeamercolor[fg]{page number in head/foot}\usebeamerfont{page number in head/foot}
    % \usebeamerfont{author in head/foot}\insertshortauthor
    \insertshortdate{}%
    \hfill
    {\insertframenumber{}}/{\inserttotalframenumber\quad}
    \usebeamertemplate{page number in head/foot}
  \end{beamercolorbox}}%
  \vskip2pt%
}

\setbeamercolor{frametitle}{parent=subsection in head/foot}
\setbeamercolor{frametitle right}{parent=section in head/foot}

\pgfdeclarehorizontalshading[frametitle.bg,frametitle right.bg]{beamer@frametitleshade}{\paperheight}{%
  color(0pt)=(frametitle.bg);
  color(\paperwidth)=(frametitle right.bg)
}

\pgfdeclareverticalshading{beamer@topshade}{2\paperwidth}{%
  color(0pt)=(pgftransparent!100);
  color(8pt)=(pgftransparent!0)
}

\pgfdeclarefading{beamer@topshadowmask}{\pgfuseshading{beamer@topshade}}

% \addtobeamertemplate{headline}
% {}
% {%
%   \vskip0pt
%   \begin{pgfpicture}
%     \pgfpathrectangle{\pgfpoint{0pt}{-4pt}}{\pgfpoint{\paperwidth}{4pt}}%
%     \pgfsetfading{beamer@topshadowmask}{}%
%     \pgfusepath{fill}%
%   \end{pgfpicture}
%   \vskip-2pt
% }

\defbeamertemplate*{headline}{USTC theme}{}

\defbeamertemplate*{frametitle}{USTC theme}
{%
  \leavevmode%
  \hbox{%
  % \usebeamerfont{frametitle in head/foot}%
  \begin{beamercolorbox}[wd=.65\paperwidth,ht=10ex,dp=1.5ex]{section in head/foot}%
    \usebeamerfont{frametitle}
    \insertsubsectionhead
    \newline \usebeamerfont{framesubtitle} \hspace*{1.5ex} 123
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.35\paperwidth,ht=10ex,dp=1.5ex,right]{section in head/foot}%
    % \usebeamerfont{headline}\usebeamerfont{subsection in head/foot}\hspace*{2ex}\insertsubsectionhead
    \includegraphics{ustc_logo_side.pdf}\hspace*{2ex}
  \end{beamercolorbox}}%
  \vskip0pt%
}


\mode
<all>
